<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python - Pipelines and Interfaces &mdash; nipy pipeline and interfaces package</title>
    
    <link rel="stylesheet" href="../../_static/nipype.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="top" title="nipy pipeline and interfaces package" href="../../index.html" />
 
<meta name="keywords" content="nipype, neuroimaging, pipeline, workflow, parallel, python, neuroscience">
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-339450-7', 'nipy.org/nipype');
  ga('send', 'pageview');
</script>

  </head>
  <body role="document">
<div class="header-wrapper">
    <div style="background-color: white; text-align: left; padding: 10px 10px 15px 15px">
            <a href="../../index.html">
            <img src="../../_static/nipype-banner-bg.png" alt="NIPY logo"  border="0" />
        <div style="margin-top: 1em;
                border-top: 1px solid #AAA;
                border-bottom: 1px solid #AAA;
                border-radius: 5px;
                padding: 3px 1em;">
            <link rel="stylesheet" href="http://www.google.com/cse/style/look/default.css" type="text/css" />
<style type="text/css">
    a.navbar {
    color: ;
    letter-spacing: .05em;
    font-weight: bold;
        }
</style>

<a class="navbar" href="../../index.html">Home</a> ·
<a class="navbar" href="../../quickstart.html">Quickstart</a> ·
<a class="navbar" href="../../documentation.html">Documentation</a> ·
<a class="navbar" href="../../about.html">Citation</a> ·
<a class="navbar" href="http://nipy.org">NiPy</a>

        </div>
    </div>
</div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<style type="text/css">
    input.gsc-input {
        border-color: #BCCDF0;
    }
    input.gsc-search-button {
        border-color: #666666;
        background-color: #CECECE;
        padding: 0;
    }
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
    div.sphinxsidebar input[type="text"] {
        width: 100%;
    }
    div.sphinxsidebar input[type="submit"] {
        width: 100%;
    }
</style>

<div class="sidebarblock">
    <div id="cse-search-form">Loading</div>

    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript">
        google.load('search', '1', {language : 'en'});
        google.setOnLoadCallback(function() {
            var customSearchControl = new google.search.CustomSearchControl(
                    '010960497803984932957:u8pmqf7fdoq');

            customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
            var options = new google.search.DrawOptions();
            options.enableSearchboxOnly("../../searchresults.html");
            customSearchControl.draw('cse-search-form', options);
        }, true);
    </script>
</div>

  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">interfaces.mrtrix3.tracking</a><ul>
<li><a class="reference internal" href="#tractography">Tractography</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<style type="text/css">
    div.sphinxsidebar .tile {
        border: 1px solid #D1DDE2;
        border-radius: 10px;
        background-color: #E1E8EC;
        padding-left: 0.5em;
        margin: 1em 0;
    }
</style>
<div class="sidebarblock">
    <h3>Versions</h3>

    <div class="tile">
        <table style="width: 100%;">
            <tr style="font-weight: bold;">
                <td align="left">Release</td><td align="right">Devel</td>
            </tr>
            <tr>
                <td align="left">0.11.0</td><td align="right">0.11.0</td>
            </tr>
            <tr>
                <td align="left"><a href="../../users/install.html">Download</a></td>
                <td align="right"><a href="https://github.com/nipy/nipype">Github</a></td>
            </tr>
        </table>
    </div>

    <div id="buttons">
        <div id="ohloh-use" style="margin-right: 25px; margin-top: -2px; float: left;">
            <script type="text/javascript"
                    src="https://www.openhub.net/p/480871/widgets/project_users_logo.js">
            </script>
        </div><!-- use -->
        <g:plusone size="medium" annotation="none"></g:plusone>
        <div class="clear"></div>
    </div><!-- buttons container -->
</div>


<script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script>

<h3>Links</h3>

<ul>
    <li>Docs: <a href="http://nipy.org/nipype">Stable</a> · <a href="http://www.mit.edu/~satra/nipype-nightly/">Nightly</a></li>
    <li>Code: <a href="http://github.com/nipy/nipype">Github</a> · <a href="http://github.com/nipy/nipype/issues">Bugs-Requests</a></li>
    <li>Forum: <a href="http://neurostars.org/t/nipype">User</a> · <a href="http://projects.scipy.org/mailman/listinfo/nipy-devel">Developer</a></li>
    <li><a href="http://nipy.org/software/license/index.html"><img src="https://img.shields.io/pypi/l/nipype.svg" alt="License"></a> · <a href="http://nipy.org/about/funding.html">Funding</a></li>
    <li><a href="https://travis-ci.org/nipy/nipype"><img src="https://travis-ci.org/nipy/nipype.png?branch=master" alt="travis"></a> · <a href='https://coveralls.io/r/nipy/nipype'><img src='https://coveralls.io/repos/nipy/nipype/badge.png' alt='Coverage Status' /></a></li>
    <li><a href="https://pypi.python.org/pypi/nipype/"><img src="https://img.shields.io/pypi/dm/nipype.svg" alt="Downloads"></a> · <a href='https://pypi.python.org/pypi/nipype/'><img src='https://img.shields.io/pypi/pyversions/nipype.svg' alt='Python Versions' /></a></li>
</ul>


        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interfaces-mrtrix3-tracking">
<h1>interfaces.mrtrix3.tracking<a class="headerlink" href="#interfaces-mrtrix3-tracking" title="Permalink to this headline">¶</a></h1>
<span class="target" id="nipype-interfaces-mrtrix3-tracking-tractography"></span><div class="section" id="tractography">
<span id="index-0"></span><h2>Tractography<a class="headerlink" href="#tractography" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://github.com/nipy/nipype/tree/f9c98ba/nipype/interfaces/mrtrix3/tracking.py#L192">Link to code</a></p>
<p>Wraps command <strong>tckgen</strong></p>
<p>Performs streamlines tractography after selecting the appropriate
algorithm.</p>
<table class="docutils citation" frame="void" id="fact" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[FACT]</td><td>Mori, S.; Crain, B. J.; Chacko, V. P. &amp; van Zijl,
P. C. M. Three-dimensional tracking of axonal projections in the
brain by magnetic resonance imaging. Annals of Neurology, 1999,
45, 265-269</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ifod1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[iFOD1]</td><td>Tournier, J.-D.; Calamante, F. &amp; Connelly, A. MRtrix:
Diffusion tractography in crossing fiber regions. Int. J. Imaging
Syst. Technol., 2012, 22, 53-66</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ifod2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[iFOD2]</td><td>Tournier, J.-D.; Calamante, F. &amp; Connelly, A. Improved
probabilistic streamlines tractography by 2nd order integration
over fibre orientation distributions. Proceedings of the
International Society for Magnetic Resonance in Medicine, 2010, 1670</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="nulldist" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Nulldist]</td><td>Morris, D. M.; Embleton, K. V. &amp; Parker, G. J.
Probabilistic fibre tracking: Differentiation of connections from
chance events. NeuroImage, 2008, 42, 1329-1339</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="tensor-det" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Tensor_Det]</td><td>Basser, P. J.; Pajevic, S.; Pierpaoli, C.; Duda, J.
and Aldroubi, A. In vivo fiber tractography using DT-MRI data.
Magnetic Resonance in Medicine, 2000, 44, 625-632</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="tensor-prob" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Tensor_Prob]</td><td>Jones, D. Tractography Gone Wild: Probabilistic Fibre
Tracking Using the Wild Bootstrap With Diffusion Tensor MRI. IEEE
Transactions on Medical Imaging, 2008, 27, 1268-1274</td></tr>
</tbody>
</table>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nipype.interfaces.mrtrix3</span> <span class="kn">as</span> <span class="nn">mrt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span> <span class="o">=</span> <span class="n">mrt</span><span class="o">.</span><span class="n">Tractography</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s">&#39;fods.mif&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">roi_mask</span> <span class="o">=</span> <span class="s">&#39;mask.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">seed_sphere</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span><span class="o">.</span><span class="n">cmdline</span>                               
<span class="go">&#39;tckgen -algorithm iFOD2 -mask mask.nii.gz -seed_sphere 80.000000,100.000000,70.000000,10.000000 fods.mif tracked.tck&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>                                 
</pre></div>
</div>
<p>Inputs:</p>
<div class="highlight-python"><div class="highlight"><pre>[Mandatory]
in_file: (an existing file name)
        input file to be processed
        flag: %s, position: -2
out_file: (a file name, nipype default value: tracked.tck)
        output file containing tracks
        flag: %s, position: -1

[Optional]
act_file: (an existing file name)
        use the Anatomically-Constrained Tractography framework during
        tracking; provided image must be in the 5TT (five - tissue - type)
        format
        flag: -act %s
algorithm: (&#39;iFOD2&#39; or &#39;FACT&#39; or &#39;iFOD1&#39; or &#39;Nulldist&#39; or &#39;SD_Stream&#39;
         or &#39;Tensor_Det&#39; or &#39;Tensor_Prob&#39;, nipype default value: iFOD2)
        tractography algorithm to be used
        flag: -algorithm %s
angle: (a float)
        set the maximum angle between successive steps (default is 90deg x
        stepsize / voxelsize)
        flag: -angle %f
args: (a string)
        Additional parameters to the command
        flag: %s
backtrack: (a boolean)
        allow tracks to be truncated
        flag: -backtrack
bval_scale: (&#39;yes&#39; or &#39;no&#39;)
        specifies whether the b - values should be scaled by the square of
        the corresponding DW gradient norm, as often required for multishell
        or DSI DW acquisition schemes. The default action can also be set in
        the MRtrix config file, under the BValueScaling entry. Valid choices
        are yes / no, true / false, 0 / 1 (default: true).
        flag: -bvalue_scaling %s
crop_at_gmwmi: (a boolean)
        crop streamline endpoints more precisely as they cross the GM-WM
        interface
        flag: -crop_at_gmwmi
cutoff: (a float)
        set the FA or FOD amplitude cutoff for terminating tracks (default
        is 0.1)
        flag: -cutoff %f
cutoff_init: (a float)
        set the minimum FA or FOD amplitude for initiating tracks (default
        is the same as the normal cutoff)
        flag: -initcutoff %f
downsample: (a float)
        downsample the generated streamlines to reduce output file size
        flag: -downsample %f
environ: (a dictionary with keys which are a value of type &#39;str&#39; and
         with values which are a value of type &#39;str&#39;, nipype default value:
         {})
        Environment variables
grad_file: (an existing file name)
        dw gradient scheme (MRTrix format
        flag: -grad %s
grad_fsl: (a tuple of the form: (an existing file name, an existing
         file name))
        (bvecs, bvals) dw gradient scheme (FSL format
        flag: -fslgrad %s %s
ignore_exception: (a boolean, nipype default value: False)
        Print an error message instead of throwing an exception in case the
        interface fails to run
in_bval: (an existing file name)
        bvals file in FSL format
in_bvec: (an existing file name)
        bvecs file in FSL format
        flag: -fslgrad %s %s
init_dir: (a tuple of the form: (a float, a float, a float))
        specify an initial direction for the tracking (this should be
        supplied as a vector of 3 comma-separated values
        flag: -initdirection %f,%f,%f
max_length: (a float)
        set the maximum length of any track in mm (default is 100 x
        voxelsize)
        flag: -maxlength %f
max_seed_attempts: (an integer (int or long))
        set the maximum number of times that the tracking algorithm should
        attempt to find an appropriate tracking direction from a given seed
        point
        flag: -max_seed_attempts %d
max_tracks: (an integer (int or long))
        set the maximum number of tracks to generate. The program will not
        generate more tracks than this number, even if the desired number of
        tracks hasn&#39;t yet been reached (default is 100 x number)
        flag: -maxnum %d
min_length: (a float)
        set the minimum length of any track in mm (default is 5 x voxelsize)
        flag: -minlength %f
n_samples: (an integer (int or long))
        set the number of FOD samples to take per step for the 2nd order
        (iFOD2) method
        flag: -samples %d
n_tracks: (an integer (int or long))
        set the desired number of tracks. The program will continue to
        generate tracks until this number of tracks have been selected and
        written to the output file
        flag: -number %d
n_trials: (an integer (int or long))
        set the maximum number of sampling trials at each point (only used
        for probabilistic tracking)
        flag: -trials %d
noprecompt: (a boolean)
        do NOT pre-compute legendre polynomial values. Warning: this will
        slow down the algorithm by a factor of approximately 4
        flag: -noprecomputed
nthreads: (an integer (int or long))
        number of threads. if zero, the number of available cpus will be
        used
        flag: -nthreads %d
out_seeds: (a file name)
        output the seed location of all successful streamlines to a file
        flag: -output_seeds %s
power: (an integer (int or long))
        raise the FOD to the power specified (default is 1/nsamples)
        flag: -power %d
roi_excl: (an existing file name or a tuple of the form: (a float, a
         float, a float, a float))
        specify an exclusion region of interest, streamlines that enter ANY
        exclude region will be discarded
        flag: -exclude %s
roi_incl: (an existing file name or a tuple of the form: (a float, a
         float, a float, a float))
        specify an inclusion region of interest, streamlines must traverse
        ALL inclusion regions to be accepted
        flag: -include %s
roi_mask: (an existing file name or a tuple of the form: (a float, a
         float, a float, a float))
        specify a masking region of interest. If defined,streamlines exiting
        the mask will be truncated
        flag: -mask %s
seed_dynamic: (an existing file name)
        determine seed points dynamically using the SIFT model (must not
        provide any other seeding mechanism). Note that while this seeding
        mechanism improves the distribution of reconstructed streamlines
        density, it should NOT be used as a substitute for the SIFT method
        itself.
        flag: -seed_dynamic %s
seed_gmwmi: (an existing file name)
        seed from the grey matter - white matter interface (only valid if
        using ACT framework)
        flag: -seed_gmwmi %s
        requires: act_file
seed_grid_voxel: (a tuple of the form: (an existing file name, an
         integer (int or long)))
        seed a fixed number of streamlines per voxel in a mask image; place
        seeds on a 3D mesh grid (grid_size argument is per axis; so a
        grid_size of 3 results in 27 seeds per voxel)
        flag: -seed_grid_per_voxel %s %d
        mutually_exclusive: seed_image, seed_rnd_voxel
seed_image: (an existing file name)
        seed streamlines entirely at random within mask
        flag: -seed_image %s
seed_rejection: (an existing file name)
        seed from an image using rejection sampling (higher values = more
        probable to seed from
        flag: -seed_rejection %s
seed_rnd_voxel: (a tuple of the form: (an existing file name, an
         integer (int or long)))
        seed a fixed number of streamlines per voxel in a mask image; random
        placement of seeds in each voxel
        flag: -seed_random_per_voxel %s %d
        mutually_exclusive: seed_image, seed_grid_voxel
seed_sphere: (a tuple of the form: (a float, a float, a float, a
         float))
        spherical seed
        flag: -seed_sphere %f,%f,%f,%f
sph_trait: (a tuple of the form: (a float, a float, a float, a
         float))
        flag: %f,%f,%f,%f
step_size: (a float)
        set the step size of the algorithm in mm (default is 0.1 x
        voxelsize; for iFOD2: 0.5 x voxelsize)
        flag: -step %f
stop: (a boolean)
        stop propagating a streamline once it has traversed all include
        regions
        flag: -stop
terminal_output: (&#39;stream&#39; or &#39;allatonce&#39; or &#39;file&#39; or &#39;none&#39;)
        Control terminal output: `stream` - displays to terminal immediately
        (default), `allatonce` - waits till command is finished to display
        output, `file` - writes output to file, `none` - output is ignored
unidirectional: (a boolean)
        track from the seed point in one direction only (default is to track
        in both directions)
        flag: -unidirectional
use_rk4: (a boolean)
        use 4th-order Runge-Kutta integration (slower, but eliminates
        curvature overshoot in 1st-order deterministic methods)
        flag: -rk4
</pre></div>
</div>
<p>Outputs:</p>
<div class="highlight-python"><div class="highlight"><pre>out_file: (an existing file name)
        the output filtered tracks
out_seeds: (a file name)
        output the seed location of all successful streamlines to a file
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2009-15, Neuroimaging in Python team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
</div>

  </body>
</html>